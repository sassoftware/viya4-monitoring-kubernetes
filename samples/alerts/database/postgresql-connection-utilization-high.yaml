apiVersion: 1
groups:
  - interval: 5m
    name: SAS Viya Alerts
    folder: Database Alerts
    orgId: 1
    rules:
      - title: PostgreSQL Connection Utilization High
        annotations:
          description: PostgreSQL database connection usage is above 85% of max connections.
          summary: Database is nearing connection limit.
        condition: A
        data:
          - datasourceUid: prometheus
            model:
              expr: (pg_stat_activity_count / pg_settings_max_connections) * 100 > 85
              instant: true
            refId: A
            relativeTimeRange:
              from: 300
              to: 0
        for: 5m
        labels:
          severity: warning
        uid: postgres_connection_utilization
